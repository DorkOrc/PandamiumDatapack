# arguments: id, blocks_per_tick, to_y_level

$kill @e[x=0,tag=elevator.platform,tag=elevator.id.$(id)]
$execute align xyz run summon minecraft:item_display ~0.5 ~ ~0.5 {Tags:["elevator","elevator.platform","elevator.brain","elevator.move","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true,brain:{blocks_per_tick:$(blocks_per_tick)d,destination:$(to_y_level)d,id:"$(id)"},move:true}},teleport_duration:1,Passengers:[{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,-2,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{face:"ceiling",facing:"north"},Name:"minecraft:grindstone"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,-1,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",facing:"north",open:"false"},Name:"minecraft:spruce_trapdoor"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,-1,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",shape:"straight",facing:"south"},Name:"minecraft:spruce_stairs"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,-1,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",facing:"north",open:"false"},Name:"minecraft:spruce_trapdoor"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,-1,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",shape:"straight",facing:"east"},Name:"minecraft:spruce_stairs"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,-1,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:stripped_spruce_log"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,-1,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",shape:"straight",facing:"west"},Name:"minecraft:spruce_stairs"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,-1,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",facing:"south",open:"false"},Name:"minecraft:spruce_trapdoor"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,-1,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",shape:"straight",facing:"north"},Name:"minecraft:spruce_stairs"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,-1,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{half:"top",facing:"south",open:"false"},Name:"minecraft:spruce_trapdoor"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,0,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,0,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,0,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,0,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,1,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,1,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,1,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,1,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,2,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,2,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"top"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,2,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,2,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"top"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,2,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{hanging:"true"},Name:"minecraft:lantern"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,2,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"top"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,2,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,2,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"top"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,2,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{axis:"y"},Name:"minecraft:iron_chain"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,3,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"bottom"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,3,-1.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"bottom"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,3,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Name:"minecraft:smooth_stone"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-1.5,3,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"bottom"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[0.5,3,0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{type:"bottom"},Name:"minecraft:spruce_slab"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}},{transformation:{left_rotation:[0,0,0,1],translation:[-0.5,4,-0.5],right_rotation:[0,0,0,1],scale:[1,1,1]},block_state:{Properties:{face:"floor",facing:"north"},Name:"minecraft:grindstone"},id:"minecraft:block_display",Tags:["elevator","elevator.platform","elevator.id.$(id)"],data:{elevator:{id:"$(id)",platform:true}}}]}
$kill @e[x=0,tag=elevator.seat,tag=elevator.id.$(id)]
$execute align xyz positioned ~-1 ~-1 ~-1 as @a[dx=2,dy=0,dz=2,predicate=!pandamium:player/any_invisible_staff_state] positioned ~1.5 ~0.5 ~1.5 if predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{x:{max:1.5},y:{max:0.5},z:{max:1.5}}}} positioned ~ ~1 ~ unless predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{y:{max:0.5}}}} positioned as @s positioned ~ ~1 ~ align y run function pandamium:impl/hub/elevator/seat {id:"$(id)"}
$execute align xyz positioned ~-1 ~ ~-1 as @a[dx=2,dy=0,dz=2,predicate=!pandamium:player/any_invisible_staff_state] positioned ~1.5 ~0.5 ~1.5 if predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{x:{max:1.5},y:{max:0.5},z:{max:1.5}}}} positioned ~ ~1 ~ unless predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{y:{max:0.5}}}} positioned as @s align y run function pandamium:impl/hub/elevator/seat {id:"$(id)"}
$execute align xyz positioned ~-1 ~1 ~-1 as @a[dx=2,dy=1,dz=2,predicate=!pandamium:player/any_invisible_staff_state] positioned ~1.5 ~0.5 ~1.5 if predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{x:{max:1.5},y:{max:0.5},z:{max:1.5}}}} positioned ~ ~1 ~ unless predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{y:{max:0.5}}}} positioned as @s positioned ~ ~-1 ~ align y run function pandamium:impl/hub/elevator/seat {id:"$(id)"}
$execute align xyz positioned ~-1 ~2 ~-1 as @a[dx=2,dy=1,dz=2,predicate=!pandamium:player/any_invisible_staff_state] positioned ~1.5 ~0.5 ~1.5 if predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{x:{max:1.5},y:{max:0.5},z:{max:1.5}}}} positioned ~ ~1 ~ unless predicate {condition:"minecraft:entity_properties",entity:"this",predicate:{distance:{y:{max:0.5}}}} positioned as @s positioned ~ ~-2 ~ align y run function pandamium:impl/hub/elevator/seat {id:"$(id)"}
